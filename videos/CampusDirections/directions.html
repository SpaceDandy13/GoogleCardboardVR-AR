<!DOCTYPE html>
<html>
	<head>
		<!-- Google Directions API Key: AIzaSyAXMG7IIHbPwz9NcCYFo2vgfD7WtKwizmM -->
		<title> Google CardBoard AR/VR </title>
		<link rel="stylesheet" type="text/css" href="directions.css">
	</head>
	<a id="site" href="#"><img id="rpi" src="rpilogo.png" width="300" height="50"></a>
	</br>
	<body id="mybody">
		</br>
		<div>
			<!-- Origin: -->
			<select id="start">
			<option> Origin </option>
			<!-- <option> ------- </option> -->
			</select>
		</div>
		<div>
			<!-- Destination: -->
			<select id="end">
			<option> Destination </option>
			<!-- <option> ------- </option> -->
			</select>
		</div>
		</br>
		<button id="submitPath"> submit </button> 
	</body>
	<script>
			// users click on two parts of a map of RPI campus (first click is start, second is destination)
			// use that with Google directions api to get "steps" to destination
			// finds path in latitude and longitude coordinates
			// find closest points in map.json to the lat/long of steps, set up order
			// now you can move through images until you get to the location

			function initMap() {
				var markerArray = [];

				var directionsService = new google.maps.DirectionsService;

				var onChangeHandler = function() {
					calculateAndDisplayRoute(directionsService, markerArray);
				}

				// I think having on event listener for both start and stop is more similar to
				// what we may want in the final program since the fewer buttons we have to press
				// when using the google cardboard headset, the better - Shoshana 
				// // get start destination
				// document.getElementById('start').addEventListener('change', onChangeHandler);
				// // get end destination
				// document.getElementById('end').addEventListener('change', onChangeHandler);

				$("#submitPath").on("click", function(e) {
					calculateAndDisplayRoute(directionsService, markerArray);
				});
			}

			function calculateAndDisplayRoute(directionsService, markerArray) {
				directionsService.route({
					origin: document.getElementById('start').value,
					destination: document.getElementById('end').value,
					travelMode: 'WALKING'
				}, function(response, status) {
					if (status == 'OK') {
						// response if the directions result
						console.log(response)
						for (var i = 0; i < response.routes[0].overview_path.length; ++i) {
							console.log("latitude: " + response.routes[0].overview_path[i].lat() + "  longitude: " + response.routes[0].overview_path[i].lng());
						}
						findPath(locations, response.routes[0].overview_path);
					} else {
						window.alert('Directions request failed due to ' + status);
					}
				});
			}
		</script>
		<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
		<script src="directions.js" type="text/javascript"></script>
		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAXMG7IIHbPwz9NcCYFo2vgfD7WtKwizmM&callback=initMap"></script>
</html>
